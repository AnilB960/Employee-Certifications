<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
   <head>
      <title>Reports</title>
      <th:block th:include="fragments/common.html :: headerfiles">
      </th:block>
      <link rel="stylesheet" th:href="@{../css/report.css}">
      <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.21/datatables.min.css"/>
 
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.21/datatables.min.js"></script>
   </head>
   <body>
      <header th:insert="fragments/common.html :: header"> </header>
      <div class="note">
         <p>Employees with Certification Report</p>
      </div>
      <div class="table-div">
         <div class="buttons">
            <button id="json" class="btn btn-primary"><span class="fa fa-file-code-o" aria-hidden="true"></span>  JSON <span class="fa fa-download"></span></button> 
            <button id="csv" class="btn btn-info"><span class="fa fa-file-excel-o" aria-hidden="true"></span>  CSV <span class="fa fa-download"></span></button>  
            <button id="pdf" class="btn btn-danger"><span class="fa fa-file-pdf-o" aria-hidden="true"></span>  PDF <span class="fa fa-download"></span></button>
         </div>
         <table id="example" class="table table-hover table-sm table-bordered table-css">
            <thead class="thead-dark">
               <tr>
                  <th> Username </th>
                  <th> First Name </th>
                  <th> Last Name </th>
                  <th> Certification Name </th>
                  <th> Status </th>
                  <th> Certified Date </th>
                  <th> Enrolled Date </th>
                  <th> Deadline </th>
                  <th> Options </th>
               </tr>
            </thead>
            <tbody>
               <tr th:if="${report.empty}">
                  <td colspan="8"> No Employees Available </td>
               </tr>
               <tr th:each="r : ${report}">
                  <td scope="row"><span th:text="${r.username}"> t </span></td>
                  <td><span th:text="${r.firstName}"> t </span></td>
                  <td><span th:text="${r.lastName}"> t </span></td>
                  <td><span th:text="${r.certificationname}"> t </span></td>
                  <td>
                     <div th:switch="${r.certificationstatus}">
                        <p th:case="'COMPLETED'"><span class="badge badge-success">COMPLETED</span></p>
                        <p th:case="'IN PROGRESS'"><span class="badge badge-warning">IN PROGRESS</span></p>
                        <p th:case="'NOT ENROLLED'"><span class="badge badge-info">NOT ENROLLED</span></p>
                        <p th:case="'FAILED'"><span class="badge badge-danger">FAILED</span></p>
                     </div>
                  </td>
                  <td><span th:text="${r.certifieddate}"> t </span></td>
                  <td><span th:text="${r.enrolleddate}"> t </span></td>
                  <td><span th:text="${r.deadline}"> t </span></td>
                  <td>
                  <a th:href="@{'/edit/' + ${r.username}}" role="button" class="btn btn-sm btn-info">Edit <span class="fa fa-pencil-square-o"></span></a> 
            	  <a th:href="@{'/delete/' + ${r.username}}" onclick="return confirm('Are you sure you want to delete this employee?');" role="button" class="btn btn-sm btn-danger">Delete <span class="fa fa-trash-o"></span></a>
				</td>
               </tr>
            </tbody>
         </table>
      </div>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.4.1/jspdf.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/2.3.5/jspdf.plugin.autotable.min.js"></script>
      <script th:src="@{../js/tableHTMLExport.js}"></script>
      <script>
      $(document).ready(function () {
    	  $('#example').DataTable({
    	    pagingType: "simple_numbers",
    	    lengthMenu: [ 
    	    	[5, 10, 25, 50, -1], [5, 10, 25, 50, "All"] 
    	    	],
    	    pageLength: 10
    	  });
    	});
         $('#json').on('click',function(){
           $("#example").tableHTMLExport({type:'json',filename:'employees_report.json'});
         })
         $('#csv').on('click',function(){
           $("#example").tableHTMLExport({type:'csv',filename:'employees_report.csv'});
         })
         $('#pdf').on('click',function(){
           $("#example").tableHTMLExport({type:'pdf',filename:'employees_report.pdf'});
         })
      </script>     
   </body>
</html>